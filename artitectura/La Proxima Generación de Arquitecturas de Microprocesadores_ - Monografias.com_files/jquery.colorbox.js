(function(g){var j,u,s,r,m,p,i,q,f,t,n,a,c,o,h,l,e,modalLoadingOverlay;g(function(){g("body").append(g([m=g('<div id="modalBackgroundOverlay" />')[0],r=g('<div id="colorbox" />')[0]]).hide());g(r).append(g([t=g('<div id="borderTopLeft" />')[0],n=g('<div id="borderTopCenter" />')[0],a=g('<div id="borderTopRight" />')[0],c=g('<div id="borderMiddleLeft" />')[0],o=g('<div id="borderMiddleRight" />')[0],h=g('<div id="borderBottomLeft" />')[0],l=g('<div id="borderBottomCenter" />')[0],e=g('<div id="borderBottomRight" />')[0],i=g('<div id="modalContent" />')[0]]));g(i).append(g([q=g('<div id="modalLoadedContent"><a id="contentPrevious" href="#"></a><a id="contentNext" href="#"></a><span id="contentCurrent"></span><br id="modalInfoBr"/><span id="contentTitle"></span><div id="preloadPrevious"></div><div id="preloadNext"></div><div id="preloadClose"></div></div>')[0],modalLoadingOverlay=g('<div id="modalLoadingOverlay" />')[0],f=g('<a id="modalClose" href="#"></a>')[0]]));g(f).click(function(){k();return false})});function b(){g([m]).css({position:"absolute",width:g(window).width(),height:g(window).height(),top:g(window).scrollTop(),left:g(window).scrollLeft()})}function d(v){if(v.keyCode==27){k();return false}else{if(v.keyCode==37){g("a#contentPrevious").click();return false}else{if(v.keyCode==39){g("a#contentNext").click();return false}}}}function k(){g(r).removeData("open");g([m,r]).fadeOut("fast",function(){if(g(r).data("oldParent")){g(q).children().appendTo(g(r).data("oldParent"));g(r).removeData("oldParent")}else{g(q).empty()}g([m,r]).hide()});if(s){g(s).remove()}g(document).unbind("keydown",d);g(window).unbind("resize scroll",b)}g.fn.colorbox=function(A){A=g.extend({},g.fn.colorbox.settings,A);function v(J,I,G,K){var C;(typeof(window.innerHeight)=="number")?C=window.innerHeight:C=document.documentElement.clientHeight;var F=I+g(t).height()+g(h).height();var D=J+g(t).width()+g(h).width();var H=C/2-F/2+g(window).scrollTop();var E=g(window).width()/2-D/2+g(window).scrollLeft();if(F>C){H-=(F-C)}if(H<0){H=0}if(E<0){E=0}g(r).animate({height:F,top:H,left:E,width:D},G);g(c).animate({top:g(t).height(),left:0,height:I},G);g(o).animate({top:g(a).height(),left:D-g(o).width(),height:I},G);g(t).animate({top:0,left:0},G);g(n).animate({top:0,left:g(t).width(),width:J},G);g(a).animate({top:0,left:D-g(a).width()},G);g(h).animate({top:F-g(h).height(),left:0},G);g(l).animate({top:F-g(h).height(),left:g(h).width(),width:J},G);g(e).animate({top:F-g(h).height(),left:D-g(e).width()},G);g(i).animate({height:I,width:J,top:g(t).height(),left:g(t).width()},G,function(){if(K){K()}if(g.browser.msie&&g.browser.version<7){b()}})}var z=[];function w(){if(A.preloading==true&&u.length>1){var D,C;j>0?D=u[j-1].href:D=u[u.length-1].href;j<u.length-1?C=u[j+1].href:C=u[0].href;return[g(new Image()).attr("src",C),g(new Image()).attr("src",D)]}}function y(E,C){g(q).hide().html(E).append(C);if(A.contentWidth){g(q).css({width:A.contentWidth})}if(A.contentHeight){g(q).css({height:A.contentHeight})}if(A.transition=="elastic"){if(g.browser.msie&&g.browser.version<7){g(r).css("opacity","1")}v(g(q).outerWidth(true),g(q).outerHeight(true),A.transitionSpeed,function(){g(q).show();g(modalLoadingOverlay).hide();if(jQuery.isFunction(A.afterShowCallback)){A.afterShowCallback()}})}else{g(r).animate({opacity:0},A.transitionSpeed,function(){v(g(q).outerWidth(true),g(q).outerHeight(true),0,function(){g(q).show();g(modalLoadingOverlay).hide();g(r).animate({opacity:1},A.transitionSpeed);if(jQuery.isFunction(A.afterShowCallback)){A.afterShowCallback()}})})}var D=w()}function x(){g(modalLoadingOverlay).show();if(g(this).attr("id")=="contentPrevious"){j>0?j--:j=u.length-1}else{j<u.length-1?j++:j=0}B(u[j]);return false}function B(E){var C="<br id='modalInfoBr'/><span id='contentTitle'>"+E.title+"</span>";if(u.length>1){C+="<span id='contentCurrent'> "+A.contentCurrent+"</span>";C=C.replace(/{current}/,j+1).replace(/{total}/,u.length);C+="<a id='contentPrevious' href='#'>"+A.contentPrevious+"</a> ";C+="<a id='contentNext' href='#'>"+A.contentNext+"</a> "}if(A.contentInline){var D=g(A.contentInline).parent();g(r).data("oldParent",D);y(g(A.contentInline),C)}else{if(A.contentIframe){if(A.contentIframe===true){y("<iframe src ="+E.href+"></iframe>",C)}else{y("<iframe src ="+A.contentIframe+"></iframe>",C)}}else{if(E.href.match(/.(gif|png|jpg|jpeg|bmp|tif)$/i)&&!A.contentAjax){s=g(new Image()).load(function(){y("<img src='"+E.href+"' alt=''/>",C)}).attr("src",E.href)}else{s=g("<div></div>").load(((A.contentAjax)?A.contentAjax:E.href),function(F,G){if(G=="success"){y(g(this).html(),C)}else{y("<p>Ajax request unsuccessful</p>")}})}}}}g(this).bind("click.colorbox",function(){if(g(r).data("open")!=true){g(r).data("open",true);g(q).empty().css({height:"auto",width:"auto"});g(f).html(A.modalClose);g(m).css({opacity:A.bgOpacity});g([m,r,modalLoadingOverlay]).show();g(i).css({width:A.initialWidth,height:A.initialHeight});v(g(i).width(),g(i).height(),0);if(this.rel){u=g("a[rel='"+this.rel+"']");j=g(u).index(this)}else{u=g(this);j=0}B(u[j]);g("a#contentPrevious, a#contentNext").die().live("click",x);g(document).bind("keydown",d);if(g.browser.msie&&g.browser.version<7){g(window).bind("resize scroll",b)}}return false});if(A.open==true&&g(r).data("open")!=true){g(this).triggerHandler("click.colorbox")}return this.each(function(){})};g.fn.colorbox.settings={transition:"elastic",transitionSpeed:350,initialWidth:300,initialHeight:100,contentWidth:false,contentHeight:false,contentAjax:false,contentInline:false,contentIframe:false,bgOpacity:0.85,preloading:true,contentCurrent:"{current} de {total}",contentPrevious:"anterior",contentNext:"siguiente",modalClose:"cerrar",open:false,afterShowCallback:null}})(jQuery);